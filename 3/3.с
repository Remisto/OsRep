#include <efi.h>
#include <efilib.h>
#define pageSize 4096

EFI_STATUS efi_main(EFI_HANDLE handle, EFI_SYSTEM_TABLE *systab){
	InitializeLib(handle, systab);
	EFI_BOOT_SERVICES* bs = systab->BootServices;
	EFI_STATUS status;
	EFI_MEMORY_DESCRIPTOR *memMap;
	UINTN memHandle, descSize, mapKey, memMapSize;
	UINT32 descVers;
	EFI_MEMORY_TYPE memType = EfiLoaderData;
	callStats = uefi_call_wrapper(systab->BootService->GetMemoryMap, 5, &memMapSize, memMap, &mapKey, &descSize, &descVers);
	if(callStats != EFI_BUFFER_TOO_SMALL)
	{
		Print(L"Error: Cant GetMemoryMap.\n");
	}else{
		Print(L"Somthing works...\n");
	}
	
	return EFI_SUCCESS;
}